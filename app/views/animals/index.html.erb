<h1>List of Animals in Your Zoos</h1>
<% if current_user.animals.empty? %>
  <p>Uh Oh, you have no Animals in your zoos!</p>
  <p><%= link_to "Add a New Animal", new_user_animal_path(current_user) %></p>
<% else %>
  <% current_user.zoos.each do |zoo| %>
    <div class="container">
      <h2 class="zooName">Zoo: <%= link_to "#{zoo.name}", user_zoo_path(current_user, zoo) %></h2>
      <div class="container">
        <% zoo.animals.each do |animal| %>
          <h3 class="animalName">Animal: <%= link_to "#{animal.name}", user_animal_path(current_user, animal) %></h3>
          <button class="js-more" data-id="<%= animal.id %>">More Info</button>
            <ul id="animal-<%= animal.id %>"></ul>
        <% end %><br>
      </div>
      <% if zoo.animal_capacity_reached? %>
        <p></p>
      <% else %>
        <h4><%= link_to "Add a New Animal", new_user_animal_path(current_user, @zoo) %></h4>
      <% end %><br>
    </div>
  <% end %>
<% end %>

<script type="text/javascript" charset="utf-8">
$(function () {
  $(".js-more").on('click', function() {
    $(this).hide();
    var id = $(this).data("id");
    $.get("/users/" + <%= current_user.id %> + "/animals/" + id + ".json", function(data) {
      var animal = data;
      var animalTraits = "<p>Species: " + animal["species"] + "</p><p>Personality: " + animal["personality"] + "</p>";
      $("#animal-" + id).html(animalTraits);
    });
  });
});
</script>
